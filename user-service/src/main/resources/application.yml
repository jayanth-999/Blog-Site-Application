# ========================================
# USER SERVICE CONFIGURATION
# ========================================
# 
# This file configures the User Service application.
# YAML format: key-value pairs with indentation (use spaces, not tabs!)
#
# Spring Boot reads this file automatically on startup.

# ========================================
# SERVER CONFIGURATION
# ========================================
server:
  port: 8081  # User Service runs on port 8081
  # API Gateway will be on 8080
  # Blog Service will be on 8082

# ========================================
# APPLICATION CONFIGURATION
# ========================================
spring:
  application:
    name: user-service  # Service name (used by API Gateway for routing)

  # ========================================
  # DATABASE CONFIGURATION (MySQL)
  # ========================================
  datasource:
    # JDBC URL format: jdbc:mysql://host:port/database_name
    # localhost = your local machine
    # 3306 = default MySQL port
    # blogsite_db = database name (create this in MySQL!)
    url: jdbc:mysql://localhost:3306/blogsite_db?createDatabaseIfNotExist=true
    
    # MySQL credentials
    # IMPORTANT FOR BEGINNERS:
    # Replace 'root' and 'password' with YOUR MySQL username and password!
    username: root
    password: admin@123
    
    # MySQL driver class
    # This tells Spring how to connect to MySQL
    driver-class-name: com.mysql.cj.jdbc.Driver

  # ========================================
  # JPA/HIBERNATE CONFIGURATION
  # ========================================
  jpa:
    # Hibernate will automatically create/update tables based on your @Entity classes
    # OPTIONS:
    # - create: Drop and create tables on startup (DELETES ALL DATA!)
    # - create-drop: Create on startup, drop on shutdown
    # - update: Update schema if needed (SAFE for development)
    # - validate: Just validate schema, don't change it
    # - none: Do nothing
    #
    # FOR BEGINNERS: Use 'update' during development
    # FOR PRODUCTION: Use 'validate' or managed migrations (Flyway/Liquibase)
    hibernate:
      ddl-auto: update
    
    # Show SQL queries in console (helps you learn!)
    # You'll see the actual SQL that Hibernate generates
    show-sql: true
    
    # Format SQL for readability
    properties:
      hibernate:
        format_sql: true
        # MySQL dialect - tells Hibernate how to generate MySQL-specific SQL
        dialect: org.hibernate.dialect.MySQLDialect

# ========================================
# LOGGING CONFIGURATION
# ========================================
logging:
  level:
    # Root logging level
    root: INFO
    
    # Package-specific logging levels
    com.blogsite.userservice: DEBUG  # Your code - detailed logs
    org.hibernate.SQL: DEBUG         # Show SQL queries
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE  # Show SQL parameters
  
  # Log pattern (what information to include)
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"

# ========================================
# OPENAPI/SWAGGER CONFIGURATION
# ========================================
springdoc:
  api-docs:
    path: /v3/api-docs  # OpenAPI JSON available at this path
  
  swagger-ui:
    path: /swagger-ui.html  # Swagger UI available at this path
    operations-sorter: method  # Sort by HTTP method
    tags-sorter: alpha  # Sort tags alphabetically

# ========================================
# HOW TO USE THIS CONFIG FILE
# ========================================
# 
# 1. Install MySQL on your computer
# 2. Start MySQL server
# 3. Update 'username' and 'password' above
# 4. Run the application - database will be created automatically!
# 5. Access Swagger UI: http://localhost:8081/swagger-ui.html
# 
# TROUBLESHOOTING:
# 
# Problem: "Access denied for user 'root'"
# Solution: Check your MySQL username/password
# 
# Problem: "Communications link failure"
# Solution: Make sure MySQL is running
# 
# Problem: "Unknown database 'blogsite_db'"
# Solution: Either create it manually OR use createDatabaseIfNotExist=true in URL
# 
# SQL TO CREATE DATABASE MANUALLY:
# CREATE DATABASE blogsite_db;
# USE blogsite_db;
